{% if not tags or tags.folded %}
{% if editable %}
    <div id="cell_{{ id }}_code" class="language-python editor">{{source}}</div>
    {% if interactive %}<button class="button is-primary" @click="run_cell(CM.editors['cell_{{ id }}_code'].state.doc.toString(), 'cell_{{ id }}_out')">Run</button>{% endif %}
{% else %}
    <div hidden id="cell_{{ id }}_in">{{source}}</div><div id="cell_{{ id }}_code">{{highlighted | safe}}</div>
    {% if interactive %}<button class="button is-primary" @click="run_cell(document.getElementById('cell_{{ id }}_in').innerHTML, 'cell_{{ id }}_out')">Run</button>{% endif %}
{% endif %}

<!--{% if cell_outputs %}-->
<!--<div id="cell_{{ id }}_out">-->
<!--    {% for output in outputs %}-->
<!--        {% if output.output_type == "display_data" %}-->
<!--            {% for type, value in output.data %}-->
<!--                {% if type == "image/png" %}-->
<!--                    <figure class="figure" {% if meta.label %}id="{{ meta.label }}"{% endif %}>-->
<!--                    <img src="data:image/png;base64,{{ value }}" alt="output">-->
<!--                    {% if meta.caption %}<figcaption class="figure-caption has-text-centered">{{ meta.caption | safe }}</figcaption>{% endif %}-->
<!--                    </figure>-->
<!--                {% endif %}-->
<!--            {% endfor %}-->
<!--        {% elif output.output_type == "stream" %}-->
<!--            <pre>{{ output.text | safe }}</pre>-->
<!--        {% endif %}-->
<!--    {% endfor %}-->
<!--</div>-->
<!--{% endif %}-->
{% endif %}